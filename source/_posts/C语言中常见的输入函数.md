---
title: C语言中常见的输入函数
date: 2025-11-24 20:56:49
tags:
  - c
---

##  C 语言中常见的输入函数

### 1. `getchar()`

`getchar()` 函数用于从标准输入（通常是键盘）读取**一个字符**。

- **功能：** 读取标准输入的下一个字符。
- **头文件：** `<stdio.h>`
- **函数原型：** `int getchar(void);`
- **返回值：** 成功时返回读取到的字符的 **ASCII 码**（类型为 `int`）。如果到达文件末尾或发生错误，则返回 `EOF` (End Of File)。
- **特点：** 它会从输入缓冲区读取数据，直到遇到换行符或文件结束符，并且一次只取一个字符。



#### **⚙️ 用法示例：**

C

```c
#include <stdio.h>

int main() {
    printf("请输入一个字符：");
    char c = getchar(); // 读取一个字符
    printf("您输入的字符是: %c (ASCII码: %d)\n", c, c);
    return 0;
}
```



### 2. `getc()`

`getc()` 函数的功能与 `getchar()` **几乎完全相同**，都是从指定流中读取一个字符。

- **功能：** 从指定的**文件流**中读取下一个字符。
- **头文件：** `<stdio.h>`
- **函数原型：** `int getc(FILE *stream);`
- **注意：** 当使用 `getc(stdin)` 时，它的作用等同于 `getchar()`。`stdin` 代表标准输入流。在许多 C 标准库的实现中，`getchar()` 通常是 `getc(stdin)` 的宏定义或特殊优化版本。



### 3. `gets()` (⚠️ 已废弃，不推荐使用)

`gets()` 函数用于从标准输入读取**一整行字符串**，直到遇到换行符。

- **功能：** 读取一行输入并将其存储到指定的字符数组中，**但它会丢弃换行符**。
- **头文件：** `<stdio.h>`
- **函数原型：** `char *gets(char *str);`
- **⚠️ 严重缺点：** `gets()` **不会检查目标数组的大小**，如果用户输入的字符串长度超过了数组容量，就会导致**缓冲区溢出 (Buffer Overflow)**，这是非常危险的安全漏洞。因此，**C 语言标准已在 C99 中将其废弃，并在 C11 中将其移除。**



#### **✅ 推荐替代品：`fgets()` (更安全)**



由于 `gets()` 的安全隐患，推荐使用 `fgets()` 来代替它进行行输入。

- **功能：** 从指定的**文件流**中读取一行字符串，并将其存储到指定的字符数组中。
- **头文件：** `<stdio.h>`
- **函数原型：** `char *fgets(char *str, int size, FILE *stream);`
- **参数说明：**
  1. `str`：指向存储读取结果的字符数组的指针。
  2. `size`：要读取的最大字符数（包括最后的空字符 `\0`）。`fgets` **保证不会读取超过这个限制**。
  3. `stream`：要读取的输入流。对于标准输入，传入 `stdin`。
- **特点：**
  - **安全：** 它通过第二个参数 `size` 来限制读取的字符数，防止缓冲区溢出。
  - **保留换行符：** 如果读取到换行符，它会将换行符 (`\n`) **也存储**到字符串中（在空字符 `\0` 之前）。



#### **⚙️ `fgets(str, size, stdin)` 用法示例：**

C

```c
#include <stdio.h>

int main() {
    char buffer[20]; // 定义一个大小为20的缓冲区

    printf("请输入一串文本 (最多19个字符): ");
    
    // 从标准输入(stdin)读取，最多存储19个字符+1个\0
    if (fgets(buffer, sizeof(buffer), stdin) != NULL) {
        printf("您输入的字符串是: %s", buffer);
    }
    return 0;
}
```



### 4. `scanf()` (处理字符和字符串)

虽然 `scanf` 不是 `get` 系列函数，但它是 C 语言中最基础和最强大的格式化输入函数。

- **功能：** 根据指定的格式字符串从标准输入读取数据。
- **头文件：** `<stdio.h>`
- **读取单个字符：** 使用 `%c` 格式符。它会读取输入中的下一个字符，**包括空格、制表符和换行符**。
- **读取字符串：** 使用 `%s` 格式符。它会读取**非空白字符的序列**，直到遇到下一个空白字符（空格、换行或制表符）为止。`scanf` **不会**将结束的空白字符存储在字符串中，但它会在字符串末尾自动添加空字符 `\0`。



#### **⚙️ `scanf` 用法示例：**

C

```c
#include <stdio.h>

int main() {
    char single_char;
    char name[10];

    printf("请输入一个字符：");
    scanf("%c", &single_char); // 注意 %c 会读取所有字符，包括潜在的换行符
    printf("您输入的字符是: %c\n", single_char);
    
    // 清空缓冲区，以免影响下一个scanf
    while (getchar() != '\n' && getchar() != EOF); 
    
    printf("请输入一个单词 (不超过9个字符)：");
    // %s 会在遇到空白符时停止读取
    // ⚠️ 同样要注意缓冲区溢出的风险，如果输入太长
    scanf("%9s", name); // 推荐使用 %9s 限制最大长度
    printf("您输入的单词是: %s\n", name);
    
    return 0;
}
```

------



## 🔍 总结对比



| **函数**      | **功能**           | **流**               | **读取数量**        | **换行符处理**    | **缓冲区溢出风险**    | **推荐程度** |
| ------------- | ------------------ | -------------------- | ------------------- | ----------------- | --------------------- | ------------ |
| `getchar()`   | 读取**一个**字符   | 标准输入 (`stdin`)   | 1个字符             | 丢弃 (在缓冲区中) | 无                    | ⭐⭐⭐          |
| `getc()`      | 读取**一个**字符   | 指定文件流           | 1个字符             | 丢弃 (在缓冲区中) | 无                    | ⭐⭐⭐          |
| `gets()`      | 读取**一行**字符串 | 标准输入 (`stdin`)   | 一行                | **丢弃**          | **极高**              | ❌ (已废弃)   |
| `fgets()`     | 读取**一行**字符串 | 指定文件流 (`stdin`) | 一行                | **保留**          | 低 (通过 `size` 限制) | ⭐⭐⭐⭐⭐        |
| `scanf("%c")` | 读取**一个**字符   | 标准输入 (`stdin`)   | 1个字符             | 保留 (会被读取)   | 无                    | ⭐⭐⭐          |
| `scanf("%s")` | 读取**一个**单词   | 标准输入 (`stdin`)   | 一个词 (非空白序列) | 丢弃 (作为分隔符) | 高 (需配合限制宽度)   | ⭐⭐⭐          |
