---
title: 随机数的生成方式
date: 2025-10-27 10:06:24
tags:
---

在C语言中，生成随机数通常需要使用两个主要的函数：`rand()` 和 `srand()`，它们都包含在标准库 `<stdlib.h>` 中，并且通常还需要用到 `<time.h>` 库中的 `time()` 函数来设置随机数种子。

以下是生成随机数的基本步骤和示例：



### 1. 包含必要的头文件





```c
#include <stdio.h>   // 用于输入输出（如 printf）
#include <stdlib.h>  // 包含 rand() 和 srand()
#include <time.h>    // 包含 time()，用于生成随机数种子
```



### 2. 设置随机数种子 (Seed)



**关键点：** 计算机生成的随机数其实是“伪随机数”，它们是根据一个初始值（称为**种子**）通过一个确定性的算法计算出来的。如果每次程序运行使用的种子相同，那么生成的随机数序列也会相同。

为了使每次程序运行生成的随机数序列不同，我们需要使用一个变化的量作为种子。最常用的方法是使用当前的系统时间。

C

```
srand((unsigned int)time(NULL));
```

- `time(NULL)` 返回当前的日历时间（一个不断变化的值）。
- `srand()` 函数接受这个值作为参数，用来初始化随机数生成器。

**注意：** **`srand()` 只需在程序开始时调用一次。**

**更简单的写法：**

```cpp
srand(time(0));
```



### 3. 生成随机数



使用 `rand()` 函数来生成一个随机数。

C

```
int randomNumber = rand();
```

- `rand()` 函数返回一个介于 $0$ 到 `RAND_MAX` 之间（包含 $0$ 和 `RAND_MAX`）的整数。`RAND_MAX` 是一个至少为 $32767$ 的宏定义常量。



### 4. 生成特定范围的随机数



通常我们需要生成在某个特定范围内的随机数，例如 $[min, max]$。可以使用取模运算符（`%`）来实现。



#### 生成 $[0, N-1]$ 范围的随机数



C

```
// 生成 [0, 99] 范围的随机数 (共 N=100 个数)
int random_0_to_99 = rand() % 100;
```



#### 生成 $[min, max]$ 范围的随机数



公式：`rand() % (max - min + 1) + min`

C

```
int min = 1;
int max = 10;
// 生成 [1, 10] 范围的随机数
int random_1_to_10 = rand() % (max - min + 1) + min;
```



### 完整示例代码



C

```cpp
#include <stdio.h>
#include <stdlib.h>
#include <time.h>

int main() {
    // 1. 设置随机数种子
    // 使用当前时间作为种子，确保每次运行生成不同的随机数序列
    srand((unsigned int)time(NULL));

    printf("生成 5 个随机数:\n");

    // 2. 生成 [0, RAND_MAX] 范围的随机数
    int r1 = rand();
    printf("随机数 r1 (0 到 RAND_MAX): %d\n", r1);

    // 3. 生成 [0, 99] 范围的随机数
    int r2 = rand() % 100;
    printf("随机数 r2 (0 到 99): %d\n", r2);

    // 4. 生成 [1, 10] 范围的随机数
    int min_val = 1;
    int max_val = 10;
    int r3 = rand() % (max_val - min_val + 1) + min_val;
    printf("随机数 r3 (1 到 10): %d\n", r3);
    
    // 5. 生成 0.0 到 1.0 之间的浮点数
    // 公式：(double)rand() / RAND_MAX
    double r4 = (double)rand() / RAND_MAX;
    printf("随机数 r4 (0.0 到 1.0 浮点数): %f\n", r4);

    return 0;
}
```
