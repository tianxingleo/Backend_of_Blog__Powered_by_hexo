---
title: DUTå¼€å‘åŒºcpcç»„ç¬¬å››æ¬¡ä¾‹ä¼šç¬”è®°ï¼ˆ2025ç§‹ï¼‰
date: 2025-11-13 13:52:15
tags:
---

# å‰ç¼€å’Œ

## ğŸ“š å‰ç¼€å’Œç®—æ³•ä»‹ç»





### ä»€ä¹ˆæ˜¯å‰ç¼€å’Œï¼Ÿ



å‰ç¼€å’Œæ˜¯ä¸€ç§**é¢„å¤„ç†æŠ€æœ¯**ï¼Œç”¨äºå¿«é€Ÿè®¡ç®—æ•°ç»„ï¼ˆæˆ–åˆ—è¡¨ï¼‰ä¸­**å­åŒºé—´ï¼ˆæˆ–å­æ•°ç»„ï¼‰çš„å’Œ**ã€‚

ç»™å®šä¸€ä¸ªæ•°ç»„ $A$ï¼Œå®ƒçš„å‰ç¼€å’Œæ•°ç»„ $P$ çš„å®šä¹‰æ˜¯ï¼š

- $P[i]$ å­˜å‚¨çš„æ˜¯æ•°ç»„ $A$ ä¸­ä»ç¬¬ä¸€ä¸ªå…ƒç´ åˆ°ç¬¬ $i$ ä¸ªå…ƒç´ ï¼ˆåŒ…æ‹¬ç¬¬ $i$ ä¸ªå…ƒç´ ï¼‰çš„æ‰€æœ‰å…ƒç´ çš„å’Œã€‚

ç”¨å…¬å¼è¡¨ç¤ºå°±æ˜¯ï¼š



$$P[i] = A[0] + A[1] + \dots + A[i]$$



### æ ¸å¿ƒæ€æƒ³ï¼šç©ºé—´æ¢æ—¶é—´



å‰ç¼€å’Œç®—æ³•çš„æ ¸å¿ƒæ€æƒ³æ˜¯**â€œç©ºé—´æ¢æ—¶é—´â€**ã€‚

1. **é¢„å¤„ç†ï¼ˆO(n) æ—¶é—´ï¼‰ï¼š** èŠ±è´¹ $O(n)$ çš„æ—¶é—´ï¼ˆ$n$ æ˜¯æ•°ç»„é•¿åº¦ï¼‰è®¡ç®—å‡ºæ•´ä¸ªå‰ç¼€å’Œæ•°ç»„ $P$ã€‚
2. **æŸ¥è¯¢ï¼ˆO(1) æ—¶é—´ï¼‰ï¼š** ä¹‹åï¼Œä»»ä½•å­åŒºé—´ $A[i \dots j]$ çš„å’Œéƒ½å¯ä»¥åœ¨ $O(1)$ çš„æ—¶é—´å¤æ‚åº¦å†…è®¡ç®—å‡ºæ¥ã€‚

------



## ğŸ” å‰ç¼€å’Œçš„æ„å»ºä¸åº”ç”¨





### 1. å‰ç¼€å’Œæ•°ç»„çš„æ„å»º



å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªåŸå§‹æ•°ç»„ $A$ã€‚

- **åŸå§‹æ•°ç»„ $A$:** $A[0], A[1], A[2], \dots, A[n-1]$
- **å‰ç¼€å’Œæ•°ç»„ $P$:** $P[0], P[1], P[2], \dots, P[n-1]$

**è®¡ç®—å…³ç³»ï¼ˆé€’æ¨å…¬å¼ï¼‰ï¼š**

$$P[i] = P[i-1] + A[i]$$

å…¶ä¸­ï¼Œ$P[-1]$ è§†ä¸º 0ï¼ˆé€šå¸¸åœ¨å®ç°æ—¶é€šè¿‡ç´¢å¼•åç§»æˆ–åœ¨ $P$ æ•°ç»„å¼€å¤´å¤šåŠ ä¸€ä¸ª 0 æ¥å¤„ç†ï¼‰ã€‚



#### ğŸ’¡ å…·ä½“ä¾‹å­ï¼ˆä»¥ 0-based ç´¢å¼•ä¸ºä¾‹ï¼‰



å‡è®¾åŸå§‹æ•°ç»„ $A = [3, 1, 4, 1, 5]$ï¼š

| **ç´¢å¼• i** | **A[i]** | **P[i] (è®¡ç®—è¿‡ç¨‹)**    | **P[i] (å€¼)** |
| ---------- | -------- | ---------------------- | ------------- |
| 0          | 3        | $P[-1] + A[0] = 0 + 3$ | 3             |
| 1          | 1        | $P[0] + A[1] = 3 + 1$  | 4             |
| 2          | 4        | $P[1] + A[2] = 4 + 4$  | 8             |
| 3          | 1        | $P[2] + A[3] = 8 + 1$  | 9             |
| 4          | 5        | $P[3] + A[4] = 9 + 5$  | 14            |

æ‰€ä»¥ï¼Œå‰ç¼€å’Œæ•°ç»„ $P = [3, 4, 8, 9, 14]$ã€‚



### 2. å­æ•°ç»„æ±‚å’Œçš„è®¡ç®—



æˆ‘ä»¬çš„ç›®æ ‡æ˜¯è®¡ç®—å­æ•°ç»„ $A[i \dots j]$ çš„å’Œï¼ˆå³ä»ç´¢å¼• $i$ åˆ°ç´¢å¼• $j$ çš„æ‰€æœ‰å…ƒç´ ä¹‹å’Œï¼Œä¸” $i \le j$ï¼‰ã€‚

æ ¹æ®å‰ç¼€å’Œçš„å®šä¹‰ï¼š

- $P[j] = A[0] + \dots + A[i-1] + A[i] + \dots + A[j]$
- $P[i-1] = A[0] + \dots + A[i-1]$

å› æ­¤ï¼Œå­æ•°ç»„ $A[i \dots j]$ çš„å’Œä¸ºï¼š



$$\text{Sum}(A[i \dots j]) = P[j] - P[i-1]$$

ä¸ºäº†ç®€åŒ–è¾¹ç•Œå¤„ç†ï¼ˆé¿å… $i=0$ æ—¶å‡ºç° $P[-1]$ï¼‰ï¼Œæˆ‘ä»¬é€šå¸¸æ„å»ºä¸€ä¸ª**â€œå¸¦ 0â€çš„å‰ç¼€å’Œæ•°ç»„ $S$**ï¼Œé•¿åº¦ä¸º $n+1$ï¼Œå…¶ä¸­ $S[0]=0$ã€‚

- $S[k]$ å­˜å‚¨çš„æ˜¯æ•°ç»„ $A$ ä¸­å‰ $k$ ä¸ªå…ƒç´ çš„å’Œï¼ˆå³ $A[0]$ åˆ° $A[k-1]$ çš„å’Œï¼‰ã€‚
- $S[k] = A[0] + \dots + A[k-1]$



#### ğŸ’¡ å…·ä½“ä¾‹å­ï¼ˆä½¿ç”¨å¸¦ 0 çš„å‰ç¼€å’Œæ•°ç»„ $S$ï¼‰



åŸå§‹æ•°ç»„ $A = [3, 1, 4, 1, 5]$ (é•¿åº¦ $n=5$)ã€‚

| **ç´¢å¼• k (åœ¨ S ä¸­)** | **A ä¸­å…ƒç´ ä¸ªæ•°** | **S[k] (å€¼)** |
| -------------------- | ---------------- | ------------- |
| 0                    | 0                | 0             |
| 1                    | 1 ($A[0]$)       | 3             |
| 2                    | 2 ($A[0..1]$)    | 4             |
| 3                    | 3 ($A[0..2]$)    | 8             |
| 4                    | 4 ($A[0..3]$)    | 9             |
| 5                    | 5 ($A[0..4]$)    | 14            |

å¸¦ 0 çš„å‰ç¼€å’Œæ•°ç»„ $S = [0, 3, 4, 8, 9, 14]$ã€‚

**è®¡ç®—å­æ•°ç»„ $A[2 \dots 4]$ çš„å’Œï¼š**

$A[2 \dots 4] = [4, 1, 5]$ï¼Œå’Œä¸º $4 + 1 + 5 = 10$ã€‚

ä½¿ç”¨å‰ç¼€å’Œè®¡ç®—ï¼š



$$\text{Sum}(A[2 \dots 4]) = S[4+1] - S[2] = S[5] - S[2]$$

$$\text{Sum} = 14 - 4 = 10$$



ç»“æœæ­£ç¡®ï¼



# å·®åˆ†ç®—æ³•

## ğŸ“š å·®åˆ†ç®—æ³•ä»‹ç»





### ä»€ä¹ˆæ˜¯å·®åˆ†æ•°ç»„ï¼Ÿ



å·®åˆ†æ•°ç»„ $D$ æ˜¯é’ˆå¯¹åŸå§‹æ•°ç»„ $A$ è€Œæ„å»ºçš„ä¸€ä¸ªæ•°ç»„ã€‚å®ƒçš„æ ¸å¿ƒå®šä¹‰æ˜¯ï¼š

- $D[i]$ å­˜å‚¨çš„æ˜¯åŸå§‹æ•°ç»„ $A$ ä¸­**ç›¸é‚»ä¸¤ä¸ªå…ƒç´ çš„å·®å€¼**ã€‚

ç”¨å…¬å¼è¡¨ç¤ºï¼š

$$D[i] = A[i] - A[i-1] \quad (\text{å…¶ä¸­ } A[-1] \text{ è§†ä½œ } 0)$$

æ¢å¥è¯è¯´ï¼Œå·®åˆ†æ•°ç»„ $D$ æ˜¯åŸå§‹æ•°ç»„ $A$ çš„**ä¸€é˜¶å‰å‘å·®åˆ†**ã€‚



### æ ¸å¿ƒæ€æƒ³ï¼šæ›´æ–°è½¬åŒ–ä¸ºç‚¹æ“ä½œ



å·®åˆ†ç®—æ³•çš„æ ¸å¿ƒåœ¨äºï¼š

1. æ„é€ å…³ç³»ï¼š åŸå§‹æ•°ç»„ $A$ æ˜¯å·®åˆ†æ•°ç»„ $D$ çš„å‰ç¼€å’Œæ•°ç»„ã€‚

   

   $$\text{ç”± } A[i] = D[i] + A[i-1] \text{ å¯çŸ¥ï¼Œ} A[i] = D[0] + D[1] + \dots + D[i]$$

2. **åŒºé—´æ›´æ–°ï¼š** å¦‚æœè¦å¯¹åŸå§‹æ•°ç»„ $A$ çš„ä¸€ä¸ªå­åŒºé—´ $A[i \dots j]$ **åŒæ—¶åŠ ä¸Šä¸€ä¸ªå€¼ $C$**ï¼Œæˆ‘ä»¬åªéœ€è¦å¯¹å·®åˆ†æ•°ç»„ $D$ ä¸­çš„**ä¸¤ä¸ªç‚¹**è¿›è¡Œæ“ä½œã€‚

3. **æœ€ç»ˆæ±‚å€¼ï¼š** åœ¨æ‰€æœ‰åŒºé—´æ›´æ–°æ“ä½œå®Œæˆåï¼Œé€šè¿‡å¯¹å·®åˆ†æ•°ç»„ $D$ æ±‚å‰ç¼€å’Œï¼Œå³å¯è¿˜åŸå‡ºæœ€ç»ˆæ›´æ–°åçš„æ•°ç»„ $A$ã€‚

è¿™ç§æŠ€æœ¯å°† $O(n)$ çš„åŒºé—´æ›´æ–°æ“ä½œï¼Œä¼˜åŒ–æˆäº† $O(1)$ çš„å·®åˆ†æ•°ç»„ç‚¹æ“ä½œã€‚

------



## ğŸ” å·®åˆ†æ•°ç»„çš„æ„å»ºä¸æ“ä½œ





### 1. å·®åˆ†æ•°ç»„çš„æ„å»ºï¼ˆé¢„å¤„ç†ï¼‰



ç»™å®šä¸€ä¸ªåŸå§‹æ•°ç»„ $A$ï¼Œæˆ‘ä»¬é¦–å…ˆæ„å»ºå®ƒçš„å·®åˆ†æ•°ç»„ $D$ã€‚



#### ğŸ’¡ å…·ä½“ä¾‹å­



å‡è®¾åŸå§‹æ•°ç»„ $A = [3, 5, 8, 2, 7]$ (é•¿åº¦ $n=5$)ï¼š

| **ç´¢å¼• i** | **A[i]** | **A[iâˆ’1] (æˆ– 0)** | **D[i]=A[i]âˆ’A[iâˆ’1]** |
| ---------- | -------- | ----------------- | -------------------- |
| 0          | 3        | $A[-1]=0$         | $3 - 0 = 3$          |
| 1          | 5        | $A[0]=3$          | $5 - 3 = 2$          |
| 2          | 8        | $A[1]=5$          | $8 - 5 = 3$          |
| 3          | 2        | $A[2]=8$          | $2 - 8 = -6$         |
| 4          | 7        | $A[3]=2$          | $7 - 2 = 5$          |

**å·®åˆ†æ•°ç»„ $D$:** $[3, 2, 3, -6, 5]$

**éªŒè¯ï¼ˆæ±‚ $D$ çš„å‰ç¼€å’Œï¼‰ï¼š**

- $D[0]=3 \implies A[0]=3$

- $D[0]+D[1]=3+2=5 \implies A[1]=5$

- $D[0]+D[1]+D[2]=5+3=8 \implies A[2]=8$

  ... éªŒè¯æˆåŠŸã€‚



### 2. åŒºé—´æ›´æ–°æ“ä½œï¼ˆ$O(1)$ æ“ä½œï¼‰



ç›®æ ‡ï¼šå¯¹åŸå§‹æ•°ç»„ $A$ çš„å­åŒºé—´ $A[i \dots j]$ çš„æ‰€æœ‰å…ƒç´ ï¼Œéƒ½åŠ ä¸Šä¸€ä¸ªå¸¸æ•° $C$ã€‚

æˆ‘ä»¬åªéœ€è¦å¯¹å·®åˆ†æ•°ç»„ $D$ è¿›è¡Œ**ä¸¤ä¸ªä¿®æ”¹**ï¼š

1. **åœ¨èµ·ç‚¹ $i$ å¤„åŠ ä¸Š $C$ï¼š** $D[i] = D[i] + C$
   - æ•ˆæœï¼šç”±äº $A[i]$ æ˜¯ $D[0 \dots i]$ çš„å’Œï¼Œæ­¤æ“ä½œä¼šä½¿ $A[i], A[i+1], \dots, A[n-1]$ **å…¨éƒ¨**å¢åŠ  $C$ã€‚
2. **åœ¨ç»ˆç‚¹ $j+1$ å¤„å‡å» $C$ï¼š** $D[j+1] = D[j+1] - C$
   - æ•ˆæœï¼šæ­¤æ“ä½œä¼š**æŠµæ¶ˆ**ä» $A[j+1]$ å¼€å§‹çš„å…ƒç´ å—åˆ°çš„å½±å“ã€‚
   - $A[j+1] = D[0 \dots j]$ çš„å’Œ + $(D[j+1]-C)$ çš„å’Œã€‚æŠµæ¶ˆäº† $C$ çš„å¢é•¿ã€‚
   - $A[j+2], \dots$ ä¹Ÿä¼šè¢«æŠµæ¶ˆã€‚

> **æ³¨æ„ï¼š** å¦‚æœ $j$ æ˜¯æ•°ç»„çš„æœ€åä¸€ä¸ªç´¢å¼• $(n-1)$ï¼Œé‚£ä¹ˆ $j+1=n$ å·²ç»è¶…å‡ºäº† $D$ çš„èŒƒå›´ã€‚æ­¤æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è¿›è¡Œç¬¬ 1 æ­¥æ“ä½œï¼Œå› ä¸ºä¸éœ€è¦æŠµæ¶ˆåç»­å…ƒç´ ã€‚



#### ğŸ’¡ å…·ä½“ä¾‹å­ï¼ˆåŒºé—´æ›´æ–°ï¼‰



åŸå§‹æ•°ç»„ $A = [3, 5, 8, 2, 7]$ï¼Œå·®åˆ†æ•°ç»„ $D = [3, 2, 3, -6, 5]$ã€‚

**æ“ä½œï¼š** å¯¹ $A[2 \dots 4]$ï¼ˆå³ $[8, 2, 7]$ï¼‰çš„æ¯ä¸ªå…ƒç´ éƒ½åŠ ä¸Š $C=10$ã€‚

- èµ·å§‹ç´¢å¼• $i=2$ï¼Œç»“æŸç´¢å¼• $j=4$ã€‚

1. èµ·ç‚¹æ“ä½œï¼š $D[i] = D[2]$ åŠ ä¸Š $10$ã€‚

   

   $$D[2] = 3 + 10 = 13$$

2. **ç»ˆç‚¹æ“ä½œï¼š** $j=4$ æ˜¯æ•°ç»„æœ«å°¾ï¼Œ $j+1=5$ è¶…å‡ºèŒƒå›´ï¼Œ**æ— éœ€è¿›è¡Œ** $D[j+1]$ çš„æ“ä½œã€‚

**æ›´æ–°åçš„å·®åˆ†æ•°ç»„ $D'$:** $[3, 2, **13**, -6, 5]$



### 3. è¿˜åŸæœ€ç»ˆæ•°ç»„ï¼ˆå‰ç¼€å’Œï¼‰



æ‰€æœ‰åŒºé—´æ›´æ–°æ“ä½œå®Œæˆåï¼Œæˆ‘ä»¬å¯¹ $D'$ æ±‚å‰ç¼€å’Œï¼Œå¾—åˆ°æœ€ç»ˆæ›´æ–°åçš„æ•°ç»„ $A'$ã€‚

| **ç´¢å¼• i** | **Dâ€²[i]** | **Aâ€²[i]=âˆ‘k=0iDâ€²[k]** |
| ---------- | --------- | -------------------- |
| 0          | 3         | 3                    |
| 1          | 2         | $3 + 2 = 5$          |
| 2          | 13        | $5 + 13 = 18$        |
| 3          | -6        | $18 + (-6) = 12$     |
| 4          | 5         | $12 + 5 = 17$        |

**æœ€ç»ˆæ•°ç»„ $A'$:** $[3, 5, 18, 12, 17]$

**ä¸æœŸæœ›ç»“æœå¯¹æ¯”ï¼š** åŸå§‹ $A=[3, 5, 8, 2, 7]$ã€‚å¯¹ $A[2 \dots 4]$ åŠ ä¸Š 10ï¼š

- $A[0]$: $3$ (ä¸å˜)

- $A[1]$: $5$ (ä¸å˜)

- $A[2]$: $8 + 10 = 18$

- $A[3]$: $2 + 10 = 12$

- $A[4]$: $7 + 10 = 17$

  ç»“æœå®Œå…¨å»åˆï¼

------



## ğŸ–¥ï¸ C++ ä»£ç å®ç°



C++

```cpp
#include <iostream>
#include <vector>
#include <numeric>

using namespace std;

/**
 * @brief å·®åˆ†æ•°ç»„ç±»ï¼Œç”¨äºé«˜æ•ˆå¤„ç†åŒºé—´æ›´æ–°
 */
class DifferenceArray {
private:
    vector<int> diff; // å·®åˆ†æ•°ç»„ D
    int n;            // åŸå§‹æ•°ç»„é•¿åº¦

public:
    // æ„é€ å‡½æ•°ï¼šåˆå§‹åŒ–å·®åˆ†æ•°ç»„
    DifferenceArray(const vector<int>& A) {
        n = A.size();
        diff.resize(n);

        if (n > 0) {
            // D[0] = A[0] - 0
            diff[0] = A[0]; 
            // D[i] = A[i] - A[i-1]
            for (int i = 1; i < n; ++i) {
                diff[i] = A[i] - A[i - 1];
            }
        }
    }

    /**
     * @brief å¯¹åŸå§‹æ•°ç»„ A[i..j] åŒºé—´åŠ ä¸Šä¸€ä¸ªå€¼ C
     * @param i èµ·å§‹ç´¢å¼• (0-based)
     * @param j ç»“æŸç´¢å¼• (0-based)
     * @param C è¦åŠ ä¸Šçš„å€¼
     */
    void increment(int i, int j, int C) {
        // 1. åœ¨èµ·ç‚¹ i å¤„å¢åŠ  C
        diff[i] += C;

        // 2. åœ¨ç»ˆç‚¹ j+1 å¤„å‡å» C (å¦‚æœ j ä¸æ˜¯æ•°ç»„æœ«å°¾)
        // æ³¨æ„ï¼šj+1 å¯èƒ½æ˜¯æ•°ç»„æœ«å°¾çš„ç´¢å¼• n
        if (j + 1 < n) {
            diff[j + 1] -= C;
        }
    }

    /**
     * @brief è¿˜åŸæ›´æ–°åçš„åŸå§‹æ•°ç»„ A'
     * @return vector<int> æœ€ç»ˆæ•°ç»„ A'
     */
    vector<int> restoreArray() {
        vector<int> A_prime(n);
        if (n > 0) {
            // A'[0] = D[0]
            A_prime[0] = diff[0]; 
            // ä» A'[1] å¼€å§‹ï¼Œåˆ©ç”¨å‰ç¼€å’Œè¿˜åŸ: A'[i] = A'[i-1] + D[i]
            for (int i = 1; i < n; ++i) {
                A_prime[i] = A_prime[i - 1] + diff[i];
            }
        }
        return A_prime;
    }
};

int main() {
    vector<int> A = {10, 5, 20, 15}; // åŸå§‹æ•°ç»„

    cout << "åŸå§‹æ•°ç»„ A: [10, 5, 20, 15]" << endl;

    // 1. åˆå§‹åŒ–å·®åˆ†æ•°ç»„ (é¢„å¤„ç†)
    DifferenceArray da(A);

    // 2. è¿›è¡Œå¤šæ¬¡åŒºé—´æ›´æ–° (O(1) æ“ä½œ)
    
    // æ“ä½œ 1: A[1..2] åŠ ä¸Š 5 (å³ A[1] å’Œ A[2] å¢åŠ  5)
    cout << "\næ“ä½œ 1: A[1..2] åŠ ä¸Š 5" << endl;
    da.increment(1, 2, 5); // i=1, j=2, C=5
    // å·®åˆ†æ•°ç»„ D å˜åŒ–ï¼šD[1]+=5, D[3]-=5

    // æ“ä½œ 2: A[0..0] å‡å» 3 (å³ A[0] å‡å» 3)
    cout << "æ“ä½œ 2: A[0..0] å‡å» 3" << endl;
    da.increment(0, 0, -3); // i=0, j=0, C=-3
    // å·®åˆ†æ•°ç»„ D å˜åŒ–ï¼šD[0]-=3, D[1]+=3

    // 3. è¿˜åŸæœ€ç»ˆæ•°ç»„ (æ±‚ D çš„å‰ç¼€å’Œ)
    vector<int> A_final = da.restoreArray();

    cout << "\næœ€ç»ˆæ•°ç»„ A': [";
    for (int x : A_final) {
        cout << x << " ";
    }
    cout << "]" << endl;
    
    // é¢„æœŸç»“æœï¼š
    // A[0]: 10 - 3 = 7
    // A[1]: 5 + 5 = 10
    // A[2]: 20 + 5 = 25
    // A[3]: 15 (ä¸å˜)
    // æœ€ç»ˆæ•°ç»„ A': [7, 10, 25, 15]

    return 0;
}
```

------



## ğŸŒŸ æ€»ç»“ä¸åº”ç”¨





### å·®åˆ†ç®—æ³•çš„ç‰¹ç‚¹



| **ç‰¹ç‚¹**     | **æè¿°**                                              | **å¤æ‚åº¦**                          |
| ------------ | ----------------------------------------------------- | ----------------------------------- |
| **æ„å»º**     | é¢„å…ˆè®¡ç®—å·®åˆ†æ•°ç»„ $D$ã€‚                                | $O(N)$                              |
| **åŒºé—´æ›´æ–°** | å¯¹ $A[i \dots j]$ æ›´æ–°ï¼Œä»…éœ€ä¿®æ”¹ $D[i]$ å’Œ $D[j+1]$ã€‚ | $O(1)$                              |
| **å•ç‚¹æŸ¥è¯¢** | å¿…é¡»é€šè¿‡æ±‚ $D$ çš„å‰ç¼€å’Œæ¥è¿˜åŸ $A[i]$ã€‚                | $O(N)$ (è‹¥å¤šæ¬¡æŸ¥è¯¢ï¼Œéœ€ $O(N)$ è¿˜åŸ) |
| **åº”ç”¨åœºæ™¯** | å¤§é‡åŒºé—´æ›´æ–°ï¼Œå°‘é‡æˆ–æœ€åä¸€æ¬¡æ€§æŸ¥è¯¢ã€‚                  |                                     |



### å·®åˆ†ç®—æ³•çš„åº”ç”¨åœºæ™¯



1. **å¤§è§„æ¨¡åŒºé—´æ›´æ–°é—®é¢˜ï¼š** è¿™æ˜¯å·®åˆ†æ•°ç»„æœ€ä¸»è¦çš„åº”ç”¨åœºæ™¯ã€‚ä¾‹å¦‚ï¼Œæœ‰ä¸€ç³»åˆ—æ´»åŠ¨ï¼Œæ¯ä¸ªæ´»åŠ¨éƒ½ä¼šåœ¨ä¸€æ®µæ—¶é—´å†…ï¼ˆå¯¹åº”æ•°ç»„çš„ä¸€ä¸ªåŒºé—´ï¼‰å¯¹æŸä¸ªèµ„æºé‡ï¼ˆæ•°ç»„å…ƒç´ ï¼‰äº§ç”Ÿå½±å“ï¼Œéœ€è¦è®¡ç®—æ‰€æœ‰æ´»åŠ¨ç»“æŸåèµ„æºçš„æœ€ç»ˆçŠ¶æ€ã€‚
2. **äºŒç»´å·®åˆ†ï¼š** ç±»ä¼¼äºäºŒç»´å‰ç¼€å’Œï¼ŒäºŒç»´å·®åˆ†æ•°ç»„å¯ä»¥å®ç°å¯¹çŸ©é˜µä¸­**çŸ©å½¢åŒºåŸŸ**çš„æ‰¹é‡æ›´æ–°ï¼ˆåŠ å‡ä¸€ä¸ªå¸¸æ•°ï¼‰ï¼Œæ“ä½œå¤æ‚åº¦ä¹Ÿé™ä¸º $O(1)$ã€‚
3. **å·®åˆ†çº¦æŸï¼š** è™½ç„¶åå­—ç›¸ä¼¼ï¼Œä½†å·®åˆ†çº¦æŸç³»ç»Ÿæ˜¯å›¾è®ºä¸­çš„ä¸€ç§ç®—æ³•ï¼Œç”¨äºæ±‚è§£å½¢å¦‚ $X_i - X_j \le C_k$ çš„ä¸ç­‰å¼ç»„ï¼Œä¸è¿™é‡Œçš„æ•°ç»„å·®åˆ†ç®—æ³•æ¦‚å¿µä¸Šä¸åŒï¼Œä½†éƒ½åˆ©ç”¨äº†å·®å€¼å…³ç³»ã€‚



# sort()

## ğŸŒŸ å¤æ‚å¯¹è±¡æ’åºçš„ä¾‹å­



å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªå­˜å‚¨å­¦ç”Ÿä¿¡æ¯çš„ç»“æ„ä½“ `Student`ï¼š

C++

```
struct Student {
    string name;
    int score;
};
```

æˆ‘ä»¬è¦å®ç°ä¸€ä¸ªæ’åºè§„åˆ™ï¼š

1. **ä¸»è¦è§„åˆ™ï¼š** æŒ‰ç…§ `score` **é™åº**æ’åˆ—ï¼ˆåˆ†æ•°é«˜çš„åœ¨å‰ï¼‰ã€‚
2. **æ¬¡è¦è§„åˆ™ï¼ˆåˆ†æ•°ç›¸åŒæ—¶ï¼‰ï¼š** æŒ‰ç…§ `name` **å‡åº**æ’åˆ—ï¼ˆå§“åé¦–å­—æ¯å°çš„åœ¨å‰ï¼‰ã€‚

C++

```cpp
void complex_example() {
    vector<Student> students = {
        {"Alice", 90},
        {"Bob", 85},
        {"Charlie", 90},
        {"David", 95}
    };
    
    sort(students.begin(), students.end(), [](const Student& s1, const Student& s2) -> bool {
        // 1. ä¸»è¦è§„åˆ™ï¼šåˆ†æ•°é™åº (s1.score > s2.score)
        if (s1.score != s2.score) {
            // å¦‚æœåˆ†æ•°ä¸ç›¸ç­‰ï¼Œè¿”å›åˆ†æ•°é«˜çš„æ’åœ¨å‰é¢
            return s1.score > s2.score;
        } else {
            // 2. æ¬¡è¦è§„åˆ™ï¼šåˆ†æ•°ç›¸ç­‰æ—¶ï¼Œå§“åå‡åº (s1.name < s2.name)
            // å§“åæ˜¯ string ç±»å‹ï¼Œå¯ä»¥ç›´æ¥ç”¨ < è¿›è¡Œå­—å…¸åºæ¯”è¾ƒ
            return s1.name < s2.name;
        }
    });

    // é¢„æœŸè¾“å‡ºï¼š
    // David (95)
    // Alice (90)  <-- 'A' æ¯” 'C' å°ï¼Œæ’åœ¨ Charlie å‰é¢
    // Charlie (90)
    // Bob (85)
    cout << "å¤æ‚å¯¹è±¡æ’åºç»“æœ (åˆ†æ•°é™åºï¼Œå§“åå‡åº):" << endl;
    for (const auto& s : students) {
        cout << s.name << " (" << s.score << ")" << endl;
    }
}
```

# ç¦»æ•£åŒ–

## ğŸ§ ä»€ä¹ˆæ˜¯ç¦»æ•£åŒ–ç®—æ³•ï¼Ÿ





### æ ¸å¿ƒæ€æƒ³



å½“æ•°æ®é‡ $N$ ä¸å¤§ï¼ˆä¾‹å¦‚ $10^5$ çº§åˆ«ï¼‰ï¼Œä½†æ•°æ®çš„å€¼åŸŸ $V$ éå¸¸å¤§ï¼ˆä¾‹å¦‚ $10^9$ çº§åˆ«ï¼‰æ—¶ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦å¯¹æ•°æ®çš„**å€¼**è¿›è¡Œç»Ÿè®¡ã€æ’åºã€æˆ–ä½œä¸ºæ•°ç»„/æ•°æ®ç»“æ„çš„**ç´¢å¼•**ï¼Œç›´æ¥ä½¿ç”¨åŸå€¼ä½œä¸ºç´¢å¼•ä¼šå¯¼è‡´å†…å­˜æµªè´¹æˆ–è®¡ç®—æ•ˆç‡ä½ä¸‹ã€‚

**ç¦»æ•£åŒ–**å°±æ˜¯å°†è¿™äº›å·¨å¤§çš„åŸå§‹æ•°å€¼ï¼Œæ›¿æ¢æˆå®ƒä»¬åœ¨æ‰€æœ‰å€¼ä¸­çš„**ç›¸å¯¹å¤§å°æ’å**ã€‚

- **ç›®çš„ï¼š** å°†åŸæœ¬ç¨€ç–ã€åºå¤§çš„å€¼åŸŸ $[1, 10^9]$ å‹ç¼©ä¸ºè¿ç»­ã€ç´§å‡‘çš„å€¼åŸŸ $[1, N]$ï¼ˆå…¶ä¸­ $N \le 10^5$ï¼‰ã€‚



### ä¸ºä»€ä¹ˆéœ€è¦ç¦»æ•£åŒ–ï¼Ÿ



| **ç‰¹æ€§**      | **åŸå§‹æ•°æ®å€¼åŸŸï¼ˆ[1,109]ï¼‰**                      | **ç¦»æ•£åŒ–åçš„å€¼åŸŸï¼ˆ[1,N]ï¼‰**      |
| ------------- | ------------------------------------------------ | -------------------------------- |
| **å¤§å°**      | å·¨å¤§ã€ç¨€ç–                                       | ç´§å‡‘ã€å°å·§                       |
| **å†…å­˜/æ•ˆç‡** | éš¾ä»¥ä½œä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œå¯èƒ½éœ€è¦å“ˆå¸Œè¡¨æˆ–æµªè´¹å¤§é‡å†…å­˜ã€‚ | å¯ä»¥ç›´æ¥ä½œä¸ºæ•°ç»„ä¸‹æ ‡ï¼Œæ“ä½œé«˜æ•ˆã€‚ |



### é€‚ç”¨åœºæ™¯



ç¦»æ•£åŒ–å¸¸ç”¨äºéœ€è¦åˆ©ç”¨**æ•°æ®çš„å€¼**ä½œä¸º**ä¸‹æ ‡**æˆ–è¿›è¡Œ**æ’åæ¯”è¾ƒ**çš„ç®—æ³•ä¸­ï¼Œä¾‹å¦‚ï¼š

1. **ç»Ÿè®¡/è®¡æ•°ï¼š** æ‚¨æå‡ºçš„é—®é¢˜ã€‚
2. **æ ‘çŠ¶æ•°ç»„/çº¿æ®µæ ‘ï¼š** å½“éœ€è¦åœ¨å·¨å¤§å€¼åŸŸä¸Šè¿›è¡ŒåŒºé—´æ“ä½œæ—¶ã€‚
3. **åæ ‡å‹ç¼©ï¼š** åœ¨å‡ ä½•é—®é¢˜ä¸­ï¼Œå°†å·¨å¤§åæ ‡å‹ç¼©åˆ°å°çš„ç¦»æ•£åæ ‡ä¸Šã€‚

------



## ğŸ¯ è§£å†³æ‚¨çš„å…·ä½“é—®é¢˜ï¼šç»Ÿè®¡å‡ºç°æ¬¡æ•°



**é—®é¢˜ï¼š** è¾“å…¥ä¸å¤§äº $10^5$ ä¸ªä¸å¤§äº $10^9$ çš„æ•°ï¼Œç»Ÿè®¡æ¯ä¸ªæ•°çš„å‡ºç°æ¬¡æ•°ã€‚

åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼š

- æ•°æ®é‡ $N \le 10^5$ã€‚
- å€¼åŸŸ $V \le 10^9$ã€‚



### æ–¹æ¡ˆå¯¹æ¯”



| **æ–¹æ¡ˆ**                               | **ä¼˜ç‚¹**                       | **ç¼ºç‚¹**                                                 | **é€‚ç”¨äºæœ¬é¢˜ï¼Ÿ**         |
| -------------------------------------- | ------------------------------ | -------------------------------------------------------- | ------------------------ |
| **1. ç¦»æ•£åŒ– + æ•°ç»„**                   | ç»Ÿè®¡å’ŒæŸ¥è¯¢æ•ˆç‡æé«˜ ($O(1)$)    | éœ€è¦é¢å¤–çš„æ’åºå’Œæ˜ å°„æ­¥éª¤                                 | **æ˜¯ï¼Œä½†ä¸å¦‚å“ˆå¸Œè¡¨ç®€å•** |
| **2. å“ˆå¸Œè¡¨ (std::map/unordered_map)** | ç›´æ¥ä½¿ç”¨åŸå€¼ä½œä¸ºé”®ï¼Œä»£ç æœ€ç®€æ´ | ç†è®ºä¸Š $O(N \log N)$ (map) æˆ–å¹³å‡ $O(N)$ (unordered_map) | **æœ€ç®€å•é«˜æ•ˆçš„æ–¹æ¡ˆ**     |
| **3. ç›´æ¥ç”¨æ•°ç»„**                      | æ•ˆç‡ $O(1)$                    | å†…å­˜æ¶ˆè€—è¿‡å¤§ï¼Œæ— æ³•åˆ›å»º $10^9$ å¤§å°çš„æ•°ç»„                 | **ä¸å¯è¡Œ**               |

è™½ç„¶å“ˆå¸Œè¡¨æ˜¯æœ€ç®€å•ç›´æ¥çš„æ–¹æ¡ˆï¼Œä½†ä¸ºäº†è®²è§£ç¦»æ•£åŒ–ï¼Œæˆ‘ä»¬å…ˆå±•ç¤ºå¦‚ä½•ä½¿ç”¨ç¦»æ•£åŒ–æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œç„¶åå†å¯¹æ¯”å“ˆå¸Œè¡¨ã€‚



### ğŸŒŸ ç¦»æ•£åŒ–ç®—æ³•æ­¥éª¤ï¼ˆç”¨äºè®¡æ•°ï¼‰



ä½¿ç”¨ç¦»æ•£åŒ–è§£å†³æ­¤é—®é¢˜çš„æ­¥éª¤æ˜¯ï¼š



#### æ­¥éª¤ 1: å­˜å‚¨å¹¶å»é‡ (O(N log N))



å°†æ‰€æœ‰è¾“å…¥çš„ $N$ ä¸ªæ•°å­˜å…¥ä¸€ä¸ªæ•°ç»„ `A` ä¸­ï¼Œç„¶åå¤åˆ¶åˆ°å¦ä¸€ä¸ªæ•°ç»„ `B` ä¸­ï¼Œå¹¶å¯¹ `B` è¿›è¡Œ**æ’åº**å’Œ**å»é‡**ã€‚

C++

```
// å‡è®¾ input_data æ˜¯åŸå§‹è¾“å…¥
vector<int> A = {1000000000, 1, 5, 1, 1000000000, 5};
vector<int> B = A; // å¤åˆ¶æ‰€æœ‰å…ƒç´ 

// æ’åº
sort(B.begin(), B.end()); // B: {1, 1, 5, 5, 10^9, 10^9}

// å»é‡ (unique è¿”å›å»é‡åæœ‰æ•ˆå…ƒç´ çš„å°¾åè¿­ä»£å™¨)
B.erase(unique(B.begin(), B.end()), B.end()); 
// B: {1, 5, 1000000000} (å»é‡åï¼ŒN' <= 10^5)
```



#### æ­¥éª¤ 2: å»ºç«‹æ˜ å°„å…³ç³» (O(1))



ç°åœ¨ï¼Œæ•°ç»„ `B` åŒ…å«äº†æ‰€æœ‰ä¸åŒçš„åŸå§‹å€¼ï¼Œä¸”å®ƒä»¬æ˜¯å‡åºæ’åˆ—çš„ã€‚`B` çš„ä¸‹æ ‡å°±æ˜¯æˆ‘ä»¬æ‰€éœ€çš„**ç¦»æ•£åŒ–å€¼**ï¼ˆæ’åï¼‰ã€‚

- åŸå€¼ $V$ å¯¹åº”çš„ç¦»æ•£åŒ–å€¼ $R$ æ»¡è¶³ $B[R-1] = V$ã€‚



#### æ­¥éª¤ 3: ç»Ÿè®¡è®¡æ•° (O(N log N))



åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º $N'$ çš„è®¡æ•°æ•°ç»„ `count_arr`ï¼ˆ$N'$ æ˜¯ `B` çš„é•¿åº¦ï¼‰ã€‚éå†åŸå§‹æ•°ç»„ `A`ï¼Œå°†æ¯ä¸ªå…ƒç´  $A[i]$ æ˜ å°„åˆ°å®ƒçš„ç¦»æ•£åŒ–å€¼ï¼Œå¹¶åœ¨ `count_arr` ä¸­å¯¹åº”ä½ç½®è®¡æ•°ã€‚

**å¦‚ä½•å¿«é€Ÿæ‰¾åˆ°æ˜ å°„å…³ç³»ï¼Ÿ** ä½¿ç”¨ `std::lower_bound` (äºŒåˆ†æŸ¥æ‰¾)ã€‚

C++

```
// count_arr è´Ÿè´£å­˜å‚¨æ¯ä¸ªç¦»æ•£åŒ–å€¼ï¼ˆæ’åï¼‰å¯¹åº”çš„è®¡æ•°
vector<int> count_arr(B.size() + 1, 0); 

for (int val : A) {
    // æ‰¾åˆ° val åœ¨æœ‰åºå»é‡æ•°ç»„ B ä¸­çš„ä½ç½® (è¿­ä»£å™¨)
    auto it = lower_bound(B.begin(), B.end(), val);
    
    // è®¡ç®—å®ƒå¯¹åº”çš„ç´¢å¼• (0-based index)
    int rank = distance(B.begin(), it); 
    
    // rank å°±æ˜¯ç¦»æ•£åŒ–åçš„å€¼ (0 ~ N'-1)
    
    // è®¡æ•°
    count_arr[rank]++; 
}

// æœ€ç»ˆç»“æœï¼š
// count_arr[0] å­˜å‚¨çš„æ˜¯åŸå€¼ B[0] (å³ 1) çš„å‡ºç°æ¬¡æ•°
// count_arr[1] å­˜å‚¨çš„æ˜¯åŸå€¼ B[1] (å³ 5) çš„å‡ºç°æ¬¡æ•°
// count_arr[2] å­˜å‚¨çš„æ˜¯åŸå€¼ B[2] (å³ 10^9) çš„å‡ºç°æ¬¡æ•°
```



### å®Œæ•´ C++ ä»£ç ï¼ˆç¦»æ•£åŒ–+æ•°ç»„ï¼‰



C++

```cpp
#include <iostream>
#include <vector>
#include <algorithm>
#include <iterator>

using namespace std;

// ç¦»æ•£åŒ–ä¸»å‡½æ•°
void solve_discretization(vector<int>& A) {
    if (A.empty()) return;

    // 1. å¤åˆ¶ã€æ’åºã€å»é‡ -> å¾—åˆ°ç¦»æ•£å€¼é›†åˆ B
    vector<int> B = A;
    sort(B.begin(), B.end());
    B.erase(unique(B.begin(), B.end()), B.end());

    int N_prime = B.size(); // ç¦»æ•£å€¼æ•°é‡

    // 2. åˆ›å»ºè®¡æ•°æ•°ç»„ï¼Œå¤§å°ä¸ºå»é‡åçš„å…ƒç´ ä¸ªæ•°
    vector<int> count_arr(N_prime, 0);

    // 3. éå†åŸå§‹æ•°ç»„ Aï¼Œè¿›è¡Œæ˜ å°„å’Œç»Ÿè®¡
    cout << "--- ç»Ÿè®¡ç»“æœ (ä½¿ç”¨ç¦»æ•£åŒ–æ•°ç»„) ---" << endl;
    for (int val : A) {
        // ä½¿ç”¨äºŒåˆ†æŸ¥æ‰¾æ‰¾åˆ° val åœ¨ B ä¸­çš„ä½ç½®
        auto it = lower_bound(B.begin(), B.end(), val);
        
        // rank æ˜¯ val åœ¨ B ä¸­çš„ 0-based indexï¼Œå³ç¦»æ•£åŒ–åçš„å€¼
        int rank = distance(B.begin(), it); 
        
        // ç»Ÿè®¡è®¡æ•°
        count_arr[rank]++; 
    }

    // 4. è¾“å‡ºç»“æœ
    for (int i = 0; i < N_prime; ++i) {
        cout << "åŸå€¼ " << B[i] << " å‡ºç°æ¬¡æ•°: " << count_arr[i] << endl;
    }
}
```

# å“ˆå¸Œè¡¨

## ğŸ¯ ä¸€ã€ å“ˆå¸Œè¡¨çš„åŸºæœ¬åŸç†



å“ˆå¸Œè¡¨çš„æ€æƒ³éå¸¸ç®€å•ï¼š**é€šè¿‡ä¸€ä¸ªå‡½æ•°ï¼Œå°†é”®ï¼ˆKeyï¼‰ç›´æ¥æ˜ å°„åˆ°æ•°ç»„çš„ä¸‹æ ‡ï¼ˆç´¢å¼•ï¼‰ä¸Šã€‚**



### 1. ç»„æˆéƒ¨åˆ†



å“ˆå¸Œè¡¨ä¸»è¦ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼š

| **éƒ¨åˆ†**                               | **ä½œç”¨**                                                  | **å¯¹åº”åˆ°æ•°ç»„** |
| -------------------------------------- | --------------------------------------------------------- | -------------- |
| **é”® (Key)**                           | å¾…å­˜å‚¨å’ŒæŸ¥æ‰¾çš„å”¯ä¸€æ ‡è¯†ï¼ˆå¯ä»¥æ˜¯æ•°å­—ã€å­—ç¬¦ä¸²ã€å¯¹è±¡ç­‰ï¼‰ã€‚    | è¾“å…¥           |
| **å“ˆå¸Œå‡½æ•° (Hash Function)**           | å°†ä»»æ„å¤§å°çš„é”®å€¼è½¬æ¢ä¸ºå›ºå®šèŒƒå›´å†…çš„**æ•´æ•°**ã€‚              | è¿ç®—è¿‡ç¨‹       |
| **å“ˆå¸Œæ•°ç»„ (Hash Array/Bucket Array)** | å®é™…å­˜å‚¨å€¼ï¼ˆValueï¼‰çš„æ•°ç»„ï¼Œå“ˆå¸Œå‡½æ•°çš„è¾“å‡ºå°±æ˜¯æ•°ç»„çš„ä¸‹æ ‡ã€‚ | è¾“å‡ºç»“æœ       |



### 2. å·¥ä½œæµç¨‹



1. **å­˜å‚¨/æ’å…¥ï¼š**
   - å°†å¾…å­˜å‚¨çš„é”® `key` é€šè¿‡**å“ˆå¸Œå‡½æ•°** $H$ è®¡ç®—å¾—åˆ°ä¸€ä¸ªå“ˆå¸Œå€¼ $h = H(\text{key})$ã€‚
   - å°†å“ˆå¸Œå€¼ $h$ é€šè¿‡å–æ¨¡è¿ç®— $\text{index} = h \pmod M$ï¼ˆ$M$ æ˜¯å“ˆå¸Œæ•°ç»„çš„é•¿åº¦ï¼‰æ˜ å°„åˆ°æ•°ç»„çš„åˆæ³•ä¸‹æ ‡ã€‚
   - å°† `(key, value)` å¯¹å­˜å…¥è¯¥ä¸‹æ ‡å¯¹åº”çš„ä½ç½®ã€‚
2. **æŸ¥æ‰¾ï¼š**
   - è¾“å…¥å¾…æŸ¥æ‰¾çš„é”® `key`ã€‚
   - ä½¿ç”¨**åŒæ ·çš„å“ˆå¸Œå‡½æ•°**è®¡ç®—å‡ºå¯¹åº”çš„æ•°ç»„ä¸‹æ ‡ $\text{index}$ã€‚
   - ç›´æ¥è®¿é—®æ•°ç»„ $\text{HashArray}[\text{index}]$ å³å¯å¿«é€Ÿå–å‡ºå¯¹åº”çš„å€¼ `value`ã€‚

------



## ğŸ”‘ äºŒã€ æ ¸å¿ƒç»„ä»¶ï¼šå“ˆå¸Œå‡½æ•° (Hash Function)



å“ˆå¸Œå‡½æ•°çš„è´¨é‡ç›´æ¥å†³å®šäº†å“ˆå¸Œè¡¨çš„æ€§èƒ½ã€‚ä¸€ä¸ªå¥½çš„å“ˆå¸Œå‡½æ•°éœ€è¦æ»¡è¶³ä»¥ä¸‹ç‰¹æ€§ï¼š

1. **å¿«é€Ÿè®¡ç®—ï¼š** èƒ½å¤Ÿåœ¨ $O(1)$ æˆ–æå¿«çš„æ—¶é—´å†…è®¡ç®—å‡ºå“ˆå¸Œå€¼ã€‚
2. **å‡åŒ€åˆ†å¸ƒ (Uniformity)ï¼š** èƒ½å¤Ÿå°†ä¸åŒçš„é”®å€¼å‡åŒ€åœ°åˆ†æ•£åˆ°å“ˆå¸Œæ•°ç»„çš„å„ä¸ªä½ç½®ï¼Œå‡å°‘â€œå †ç§¯â€ç°è±¡ã€‚
3. **ç¡®å®šæ€§ï¼š** ç›¸åŒçš„è¾“å…¥é”®å¿…é¡»æ€»æ˜¯äº§ç”Ÿç›¸åŒçš„å“ˆå¸Œå€¼ã€‚

åœ¨å®é™…å®ç°ä¸­ï¼Œé€šå¸¸ä¼šç»“åˆå¤šç§æ–¹æ³•ï¼Œå¦‚ä¹˜æ³•ã€ä½æ“ä½œã€é™¤æ³•ï¼ˆå–æ¨¡ï¼‰ç­‰ï¼Œæ¥æ„å»ºä¸€ä¸ªé«˜æ•ˆçš„å“ˆå¸Œå‡½æ•°ã€‚

------



## ğŸ’¥ ä¸‰ã€ å“ˆå¸Œå†²çª (Hash Collision)





### ä»€ä¹ˆæ˜¯å†²çªï¼Ÿ



ç”±äºé”®å€¼ç©ºé—´ $V$ï¼ˆä¾‹å¦‚ $10^{18}$ ç§å­—ç¬¦ä¸²ï¼‰è¿œè¿œå¤§äºå“ˆå¸Œæ•°ç»„ç©ºé—´ $M$ï¼ˆä¾‹å¦‚ $10^5$ ä¸ªæ¡¶ï¼‰ï¼Œæ ¹æ®**é¸½å·¢åŸç†**ï¼Œå¿…ç„¶å­˜åœ¨ä¸åŒçš„é”® $K_1 \ne K_2$ï¼Œä½†å®ƒä»¬ç»è¿‡å“ˆå¸Œå‡½æ•°è®¡ç®—åï¼Œå´æ˜ å°„åˆ°äº†**åŒä¸€ä¸ªæ•°ç»„ä¸‹æ ‡**ï¼š

$$H(K_1) \pmod M = H(K_2) \pmod M$$

è¿™ç§æƒ…å†µå°±æ˜¯**å“ˆå¸Œå†²çª**ã€‚å“ˆå¸Œå†²çªæ˜¯ä¸å¯é¿å…çš„ï¼Œå› æ­¤å¤„ç†å†²çªçš„æ–¹æ³•æ˜¯å“ˆå¸Œè¡¨è®¾è®¡çš„å…³é”®ã€‚



### å†²çªçš„å¸¸è§è§£å†³æ–¹æ³•



å¤„ç†å†²çªä¸»è¦æœ‰ä¸¤ç§ä¸»æµæ–¹æ³•ï¼š



#### 1. é“¾å¼åœ°å€æ³• (Chaining)



è¿™æ˜¯æœ€å¸¸ç”¨ã€å®ç°æœ€ç®€å•çš„æ–¹æ¡ˆï¼ˆC++ çš„ `std::unordered_map` å’Œ Java çš„ `HashMap` å¤šæ•°é‡‡ç”¨æ­¤æ–¹æ³•ï¼‰ã€‚

- **åŸç†ï¼š** å°†å“ˆå¸Œæ•°ç»„çš„æ¯ä¸€ä¸ªä½ç½®ï¼ˆæ¡¶ï¼‰è§†ä¸ºä¸€ä¸ª**é“¾è¡¨çš„å¤´èŠ‚ç‚¹**ã€‚
- **å®ç°ï¼š** å½“å‘ç”Ÿå†²çªæ—¶ï¼Œå°†æ–°çš„é”®å€¼å¯¹ä½œä¸ºé“¾è¡¨çš„æ–°èŠ‚ç‚¹ï¼ŒæŒ‚è½½åˆ°è¯¥å“ˆå¸Œæ¡¶å¯¹åº”çš„é“¾è¡¨æœ«å°¾ã€‚
- **æ“ä½œï¼š**
  - **æ’å…¥ï¼š** è®¡ç®—ç´¢å¼•ï¼Œå°†æ–°å…ƒç´ æ’å…¥é“¾è¡¨çš„å¤´éƒ¨æˆ–å°¾éƒ¨ ($O(1)$)ã€‚
  - **æŸ¥æ‰¾ï¼š** è®¡ç®—ç´¢å¼•ï¼Œç„¶å**éå†**è¯¥é“¾è¡¨ï¼Œç›´åˆ°æ‰¾åˆ°åŒ¹é…çš„é”® ($O(1)$ å¹³å‡ï¼›æœ€å $O(N)$)ã€‚
- **ç‰¹ç‚¹ï¼š** å…è®¸å“ˆå¸Œæ•°ç»„çš„è´Ÿè½½å› å­ï¼ˆå…ƒç´ æ€»æ•° / æ¡¶æ•°ï¼‰å¤§äº 1ã€‚



#### 2. å¼€æ”¾å¯»å€æ³• (Open Addressing)



- **åŸç†ï¼š** å½“å“ˆå¸Œå‡½æ•°è®¡ç®—å‡ºçš„ä½ç½®å·²è¢«å ç”¨æ—¶ï¼Œ**æ¢æŸ¥**ï¼ˆProbeï¼‰å“ˆå¸Œæ•°ç»„ä¸­çš„å…¶ä»–ç©ºé—²ä½ç½®æ¥å­˜æ”¾æ–°å…ƒç´ ã€‚
- **å®ç°ï¼š** ä¸éœ€è¦é¢å¤–çš„é“¾è¡¨ç»“æ„ï¼Œæ‰€æœ‰å…ƒç´ éƒ½ç›´æ¥å­˜æ”¾åœ¨å“ˆå¸Œæ•°ç»„ä¸­ã€‚
- **æ¢æŸ¥ç­–ç•¥ï¼š**
  - **çº¿æ€§æ¢æŸ¥ (Linear Probing)ï¼š** å‘åä»¥å›ºå®šæ­¥é•¿ï¼ˆé€šå¸¸æ˜¯ 1ï¼‰ä¾æ¬¡å¯»æ‰¾ä¸‹ä¸€ä¸ªç©ºæ¡¶ã€‚
  - **äºŒæ¬¡æ¢æŸ¥ (Quadratic Probing)ï¼š** å‘åä»¥å¹³æ–¹æ­¥é•¿ï¼ˆ$1^2, 2^2, 3^2, \dots$ï¼‰å¯»æ‰¾ç©ºæ¡¶ã€‚
- **æ“ä½œï¼š** æ— è®ºæ˜¯æ’å…¥ã€æŸ¥æ‰¾è¿˜æ˜¯åˆ é™¤ï¼Œéƒ½éœ€è¦æ²¿ç€æ¢æŸ¥åºåˆ—è¿›è¡Œã€‚
- **ç‰¹ç‚¹ï¼š** æ•°ç»„ä¸èƒ½è¢«å®Œå…¨å¡«æ»¡ï¼Œé€šå¸¸è¦æ±‚è´Ÿè½½å› å­å°äº 0.5 æˆ– 0.75ã€‚åˆ é™¤æ“ä½œå¤æ‚ï¼ˆéœ€è¦â€œæ‡’åˆ é™¤â€æˆ–æ ‡è®°ä¸º $\text{TOMBSTONE}$ï¼‰ã€‚

------



## ğŸ“ˆ å››ã€ å“ˆå¸Œè¡¨çš„æ€§èƒ½å’Œä¼˜åŒ–





### 1. è´Ÿè½½å› å­ (Load Factor)



è´Ÿè½½å› å­ $\alpha$ æ˜¯è¡¡é‡å“ˆå¸Œè¡¨æ»¡è½½ç¨‹åº¦çš„å…³é”®æŒ‡æ ‡ï¼š



$$\alpha = \frac{\text{å…ƒç´ æ•°é‡ (N)}}{\text{æ¡¶çš„æ•°é‡ (M)}}$$

- **é“¾å¼åœ°å€æ³•ï¼š** å½“ $\alpha$ å¢å¤§æ—¶ï¼Œé“¾è¡¨å˜é•¿ï¼ŒæŸ¥æ‰¾æ•ˆç‡ä¸‹é™ã€‚
- **å¼€æ”¾å¯»å€æ³•ï¼š** å½“ $\alpha$ æ¥è¿‘ 1 æ—¶ï¼Œè¿ç»­ç©ºé—²æ¡¶è¶Šæ¥è¶Šå°‘ï¼Œèšé›†ç°è±¡ä¸¥é‡ï¼Œæ€§èƒ½æ€¥å‰§ä¸‹é™ã€‚



### 2. æ‰©å®¹ (Resizing/Rehashing)



å½“è´Ÿè½½å› å­ $\alpha$ è¶…è¿‡ä¸€ä¸ªé˜ˆå€¼ï¼ˆä¾‹å¦‚ 0.75ï¼‰æ—¶ï¼Œä¸ºäº†ç»´æŒ $O(1)$ çš„æ€§èƒ½ï¼Œéœ€è¦è¿›è¡Œ**æ‰©å®¹**ï¼š

1. åˆ›å»ºä¸€ä¸ª**ä¸¤å€**äºåŸå¤§å°çš„æ–°å“ˆå¸Œæ•°ç»„ã€‚
2. å¯¹åŸæ•°ç»„ä¸­çš„æ‰€æœ‰å…ƒç´ **é‡æ–°è®¡ç®—å“ˆå¸Œå€¼**ï¼ˆRehashingï¼‰ï¼Œå¹¶å°†å®ƒä»¬æ’å…¥åˆ°æ–°æ•°ç»„ä¸­ã€‚
3. è¿™ä¸ªè¿‡ç¨‹çš„æ—¶é—´å¤æ‚åº¦æ˜¯ $O(N)$ï¼Œä½†ç”±äºå®ƒä¸ç»å¸¸å‘ç”Ÿï¼Œæ‰€ä»¥**å¹³å‡**æ—¶é—´å¤æ‚åº¦ä»ç„¶æ˜¯ $O(1)$ã€‚

------



## æ€»ç»“ï¼šä¸ºä»€ä¹ˆå“ˆå¸Œè¡¨å¦‚æ­¤é‡è¦ï¼Ÿ



å“ˆå¸Œè¡¨æ˜¯å®ç°**å­—å…¸ (Dictionary)** æˆ–**æ˜ å°„ (Map)** æ¥å£çš„æœ€ä½³æ–¹å¼ï¼Œå®ƒåœ¨è®¸å¤šé¢†åŸŸéƒ½æœ‰åº”ç”¨ï¼š

| **é¢†åŸŸ**     | **åº”ç”¨å®ä¾‹**                                                 |
| ------------ | ------------------------------------------------------------ |
| **ç¼–ç¨‹è¯­è¨€** | C++ çš„ `std::unordered_map`ï¼ŒPython çš„ `dict`ï¼ŒJava çš„ `HashMap` éƒ½æ˜¯åŸºäºå“ˆå¸Œè¡¨å®ç°çš„ã€‚ |
| **æ•°æ®åº“**   | ç”¨äºç´¢å¼•æ•°æ®è®°å½•ï¼Œå®ç°å¿«é€ŸæŸ¥æ‰¾ã€‚                             |
| **ç¼“å­˜**     | Web æœåŠ¡å™¨æˆ–åº”ç”¨ç¨‹åºä¸­çš„ç¼“å­˜æœºåˆ¶ï¼ˆå¦‚ Redisï¼‰å¤§é‡ä½¿ç”¨å“ˆå¸Œè¡¨ã€‚ |
| **ç®—æ³•ç«èµ›** | ç»Ÿè®¡å…ƒç´ å‡ºç°æ¬¡æ•°ã€æŸ¥æ‰¾é‡å¤å…ƒç´ ã€è§£å†³ä¸¤æ•°ä¹‹å’Œç­‰é—®é¢˜æ—¶ï¼Œå“ˆå¸Œè¡¨æ˜¯é¦–é€‰å·¥å…·ã€‚ |

------



## 

# åŒæŒ‡é’ˆ
